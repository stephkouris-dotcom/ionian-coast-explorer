<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/><title>Explore — Ionian Coast Explorer</title><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css'/><style>body{background:#f6f7f9}.wrap{max-width:1100px;margin:24px auto;padding:0 16px}.grid{display:grid;grid-template-columns:2fr 1fr;gap:16px}@media (max-width:900px){.grid{grid-template-columns:1fr}}.card{background:#fff;border:1px solid #e5e8ec;border-radius:14px;overflow:hidden}.thumb{height:160px;background:#eceff3}.body{padding:12px}.filters{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}</style></head><body><main class='wrap'><nav style='display:flex;align-items:center;justify-content:space-between'><strong id='title'>Explore</strong><a href='index.html' class='secondary'>← Home</a></nav><div class='filters'><select id='region'><option value='all'>All regions</option><option value='Syvota'>Syvota</option><option value='Paxi'>Paxi</option><option value='Corfu South'>Corfu South</option><option value='Ionian'>Wider Ionian</option></select><select id='price'><option value='all'>Any price</option><option>€</option><option>€€</option><option>€€€</option></select></div><div class='grid'><section id='list'></section><aside><article class='card'><div class='thumb'></div><div class='body'><strong>Map</strong><p>Open the interactive map to view pins.</p><a id='openMap' href='map.html' class='secondary'>Open map →</a></div></article></aside></div></main><script>let ALL=[],CAT='all';function normalizeCategory(c){if(!c)return'alternative';c=c.toLowerCase();if(c.includes('boat'))return'boating';if(c.includes('accom'))return'accommodation';if(c.includes('coastal')||c.includes('fish'))return'coastal';if(c.includes('food')||c.includes('dine')||c.includes('restaurant'))return'food';return'alternative'}async function loadData(){return fetch('data/listings.json').then(r=>r.json())}function card(it){const price=it.priceCents?('From €'+(it.priceCents/100).toFixed(0)):(it.priceTier||'');const btn=(it.priceCents&&it.connectedAccountId)?`<a href='detail.html?id=${it.id}'>Book & Pay →</a>`:`<a class='secondary' href='detail.html?id=${it.id}'>View →</a>`;return `<article class='card'><div class='thumb'></div><div class='body'><strong>${it.title||'Listing'}</strong><p style='color:#667085'>${it.region||''} • ${it.category||''}</p><p>${(it.description||'').slice(0,120)}...</p><p><small>${price}</small></p>${btn}</div></article>`}function setParam(name,val){const u=new URL(location.href);if(val==='all'||!val)u.searchParams.delete(name);else u.searchParams.set(name,val);history.replaceState({},'',u);document.getElementById('openMap').href='map.html'+(u.search?u.search:'')}function apply(){const r=document.getElementById('region').value,p=document.getElementById('price').value;setParam('region',r);setParam('price',p);const items=ALL.filter(it=>(CAT==='all'||normalizeCategory(it.category)===CAT)&&(r==='all'||(it.region||'')===r)&&(p==='all'||(it.priceTier||'')===p));document.getElementById('list').innerHTML=items.map(card).join('')||'<p>No results.</p>'}function readParams(){const u=new URL(location.href);const c=(u.searchParams.get('cat')||'all').toLowerCase();const r=u.searchParams.get('region')||'all';const p=u.searchParams.get('price')||'all';CAT=['accommodation','boating','alternative','coastal','food'].includes(c)?c:'all';document.getElementById('title').textContent=(CAT==='all'?'Explore':CAT[0].toUpperCase()+CAT.slice(1));document.getElementById('region').value=r;document.getElementById('price').value=p;document.getElementById('openMap').href='map.html'+(u.search?u.search:'')}(async function(){readParams();const data=await loadData();ALL=[...(data.categories||[]),...(data.marine||[])];['region','price'].forEach(id=>document.getElementById(id).addEventListener('change',apply));apply();})()</script></body></html>