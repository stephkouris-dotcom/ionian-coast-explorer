<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/><title>Listing â€” Ionian Coast Explorer</title><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css'/></head><body><main class='container'><h1 id='t'></h1><p id='d'></p><button id='bookBtn'>Book & Pay</button><p id='msg'></p></main><script>async function getListing(){const u=new URL(location.href);const id=u.searchParams.get('id');const j=await fetch('data/listings.json').then(r=>r.json());const all=[...(j.categories||[]),...(j.marine||[])];return all.find(x=>String(x.id)===String(id))}document.getElementById('bookBtn').addEventListener('click',async()=>{const it=await getListing();if(!it||!it.connectedAccountId){alert('Not ready for direct payment.');return}const payload={listingId:it.id,title:it.title,priceCents:it.priceCents,currency:'eur',connectedAccountId:it.connectedAccountId};const res=await fetch('/.netlify/functions/stripe-checkout',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const js=await res.json();if(js.url)location.href=js.url;else document.getElementById('msg').textContent=js.error||'Error'});(async function(){const it=await getListing();if(it){document.getElementById('t').textContent=it.title;document.getElementById('d').textContent=it.description||''}})()</script></body></html>